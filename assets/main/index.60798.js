System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,i,n,a,s,o,l,u,c,h,p,f,_,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.createClass,n=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.defineProperty},function(t){o=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.CCInteger,h=t.Node,p=t.Label,f=t.Vec3,_=t.instantiate,d=t.Component},function(t){y=t.PlayerController}],execute:function(){var b,S,N,T,g,G,I,v,C,L,P,m,E;o._RF.push({},"0d88fLG9r5AopOwy9Of6AS/","GameManager",void 0);var B,M,O=l.ccclass,w=l.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(B||(B={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameManager",(b=O("GameManager"),S=w({type:u}),N=w({type:c}),T=w({type:y}),g=w({type:h}),G=w({type:p}),b((C=e((v=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(a(e),"cubePrfb",C,a(e)),n(a(e),"roadLength",L,a(e)),n(a(e),"playerCtrl",P,a(e)),n(a(e),"startMenu",m,a(e)),n(a(e),"stepsLabel",E,a(e)),s(a(e),"_road",[]),s(a(e),"_curState",M.GS_INIT),e}r(e,t);var o=e.prototype;return o.start=function(){var t;this.curState=M.GS_INIT,null===(t=this.playerCtrl)||void 0===t||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},o.init=function(){var t;this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(f.ZERO)),null===(t=this.playerCtrl)||void 0===t||t.reset()},o.onStartButtonClicked=function(){this.curState=M.GS_PLAYING},o.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(B.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===B.BT_NONE?this._road.push(B.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},o.spawnBlockByType=function(t){if(!this.cubePrfb)return null;var e=null;switch(t){case B.BT_STONE:e=_(this.cubePrfb)}return e},o.onPlayerJumpEnd=function(t){this.stepsLabel&&(this.stepsLabel.string=""+t),this.checkResult(t)},o.checkResult=function(t){t<=this.roadLength?this._road[t]==B.BT_NONE&&(this.curState=M.GS_INIT):this.curState=M.GS_INIT},i(e,[{key:"curState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="0"),setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case M.GS_END:}this._curState=t}}]),e}(d)).prototype,"cubePrfb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"roadLength",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),P=e(v.prototype,"playerCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(v.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"stepsLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=v))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,n,t,i,r,o,a;return{setters:[function(c){e=c.cclegacy,n=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){e._RF.push({},"6e79a8TkLxHeaW9vbZ/ecOt","migrate-canvas",void 0);var c=1048575;function l(e,n){for(var t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,l(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var e,t,a,s=null===(e=n.getScene())||void 0===e?void 0:e.children,v=null===(t=n.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(e){return!!e.cameraComponent}));var m=null===(a=n.getScene())||void 0===a?void 0:a.getComponentsInChildren(r),u=0;m.forEach((function(e){return u|=e.visibility&c}));for(var p=[],f=0,d=s.length;f<d;f++){var C=s[f];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(e){return!!e.cameraComponent})))}}p.forEach((function(e){if(v.find((function(n){return n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&c}))){var n=~u,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,l(e.node,t),u|=n}}))}}));var s=a.prototype.setParent;function v(e){var n=0,t=e.getComponent(i);return t&&t.cameraComponent?n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(e.parent&&(n=v(e.parent)),n)}a.prototype.setParent=function(e,n){if(s.call(this,e,n),e){var t=v(this);t&&(this.layer=t,l(this,t))}},e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,s,r,u,p,c,a,h,m,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,u=t._decorator,p=t.Animation,c=t.SkeletalAnimation,a=t.systemEvent,h=t.SystemEvent,m=t.Vec3,_=t.Component}],execute:function(){var l,d,y,P,f,v,S;r._RF.push({},"ab34e+fXatN3p1iilpvuIIx","PlayerController",void 0);var g=u.ccclass,A=u.property;t("PlayerController",(l=g("PlayerController"),d=A({type:p}),y=A({type:c}),l((v=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(n(e),"BodyAnim",v,n(e)),o(n(e),"CocosAnim",S,n(e)),s(n(e),"_startJump",!1),s(n(e),"_jumpStep",0),s(n(e),"_curJumpTime",0),s(n(e),"_jumpTime",.1),s(n(e),"_curJumpSpeed",0),s(n(e),"_curPos",new m),s(n(e),"_deltaPos",new m(0,0,0)),s(n(e),"_targetPos",new m),s(n(e),"_isMoving",!1),s(n(e),"_curMoveIndex",0),e}i(e,t);var r=e.prototype;return r.start=function(){a.on(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,m.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},r.setInputActive=function(t){t?a.on(h.EventType.MOUSE_UP,this.onMouseUp,this):a.off(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.onMouseUp=function(t){0===t.getButton()?this.jumByStep(1):2===t.getButton()&&this.jumByStep(2)},r.jumByStep=function(t){this._isMoving||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),m.add(this._targetPos,this._curPos,new m(this._jumpStep,0,0)),this._isMoving=!0,this.CocosAnim&&(this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump")),this.BodyAnim&&(1===t?this.BodyAnim.play("oneStep"):2===t&&this.BodyAnim.play("twoStep")),this._curMoveIndex+=t)},r.onOnceJumpEnd=function(){this._isMoving=!1,this.CocosAnim&&this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},r.reset=function(){this._curMoveIndex=0},e}(_)).prototype,"BodyAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"CocosAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=f))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./PlayerController.ts","./GameManager.ts","./migrate-canvas.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});